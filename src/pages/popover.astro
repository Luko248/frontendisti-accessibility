---
import Layout from "../layouts/Layout.astro";
const tooltipButtonClassName =
  "inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent p-0 text-xl font-bold text-white leading-none shadow transition focus:outline focus:outline-2 focus:outline-offset-2 focus:outline-primary/70";
const tooltipWrapperClassName = "relative flex flex-col items-center gap-4";
const tooltipPopoverClassName =
  "rounded-xl border border-[var(--color-popover-border)] bg-[var(--color-popover-surface)] text-[var(--color-popover-text)] px-4 py-2 text-sm leading-5 shadow-2xl text-left backdrop-blur-md";
---

<Layout title="Popover">
  <div class="flex items-center justify-center h-full">
    <section
      class="flex w-full max-w-3xl flex-col items-center gap-10 text-center"
    >
      <header class="space-y-4 text-center mx-auto">
        <h1 class="text-4xl font-semibold text-gray-900 mx-auto">
          Popover Pattern Playground
        </h1>
        <p class="text-lg text-gray-700">
          Discover native popover behaviors with accessible triggers and
          positioning.
        </p>
      </header>

      <div class={tooltipWrapperClassName}>
        <button
          class={tooltipButtonClassName}
          id="tooltipBtn"
          type="button"
          commandfor="tooltipPopover"
          command="toggle-popover"
          aria-haspopup="dialog"
          aria-controls="tooltipPopover"
        >
          <span aria-hidden="true">i</span>
          <span class="sr-only">Show additional information</span>
        </button>

        <div
          id="tooltipPopover"
          popover
          role="dialog"
          aria-modal="false"
          aria-labelledby="popover-label"
          aria-describedby="popover-desc"
          class={tooltipPopoverClassName}
        >
          <h2 id="popover-label" class="text-base font-semibold mb-2">
            Additional Information
          </h2>
          <div id="popover-desc">
            <p class="text-sm">
              Here is detailed information in the popover, accessible to screen
              readers and keyboard navigation.
            </p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <style>
    #tooltipBtn {
      background-color: var(--tooltip_bg-color, var(--color-tooltip));
      anchor-name: --tooltip-button;
    }

    @media (hover: hover) {
      #tooltipBtn:hover {
        --tooltip_bg-color: color-mix(
          in oklch,
          var(--color-tooltip) 85%,
          white 15%
        );
      }
    }

    #tooltipBtn:focus {
      --tooltip_bg-color: color-mix(
        in oklch,
        var(--color-tooltip) 80%,
        white 20%
      );
    }

    #tooltipPopover {
      inset: auto;
      margin: 0;
      position: absolute;
      translate: -50%;
      inline-size: min(200px, 85%);
      margin-block: 0.25em;
    }

    @supports (anchor-name: --foo) {
      #tooltipPopover {
        position-anchor: --tooltip-button;
        bottom: anchor(top);
        left: anchor(center);
      }
    }
  </style>
</Layout>
