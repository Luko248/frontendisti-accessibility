---
import Layout from "../layouts/Layout.astro";
const sectionClassName =
  "flex w-full max-w-3xl flex-col items-center gap-10 text-center";
const baseUrl = import.meta.env.BASE_URL;
---

<Layout
  title="Form Select | Frontendisti Accessibility"
  description="Demonstrate a properly associated label and select, wrapped as a form item with consistent styling."
>
  <div class="flex items-start pt-[10svb] justify-center h-full">
    <section class={sectionClassName}>
      <header class="space-y-4 text-center mx-auto">
        <h1 class="text-4xl font-semibold text-gray-900 mx-auto">
          Custom HTML Select
        </h1>
        <p class="text-lg text-gray-800">
          Example showcasing a Custom Select with ARIA attributes and keyboard
          navigation.
        </p>
      </header>

      <form
        class="max-w-[250px] mx-auto text-left space-y-6"
        aria-labelledby="example-heading"
      >
        <div class="form-item grid gap-2">
          <Fragment
            set:html={`<label
              for="customSelect"
              class="block text-sm font-medium text-slate-800"
            >
              Select person
            </label>
            <select
              id="customSelect" 
              name="speaker"
              aria-describedby="picker-description"
            >
            <button type="button" aria-haspopup="listbox">
              <selectedcontent></selectedcontent>
              <svg 
                width="24" 
                height="24" 
                viewBox="0 0 24 24"
                aria-hidden="true"
                focusable="false"
              >
                <path fill="currentColor" d="m7 10l5 5l5-5z"/>
              </svg>
            </button>
            <div role="listbox">
              <option value="Zuzana Šumlanská">
                <div class="custom-option">
                  <img
                    width="32"
                    height="32"
                    src="${baseUrl}images/speakers/zuzana-sumlanska.webp"
                    alt=""
                    loading="lazy"
                  />
                  <span>Zuzana Šumlanská</span>
                </div>
              </option>
              <option value="Martin Pešout">
                <div class="custom-option">
                  <img
                    width="32"
                    height="32"
                    src="${baseUrl}images/speakers/martin-pesout.webp"
                    alt=""
                    loading="lazy"
                  />
                  <span>Martin Pešout</span>
                </div>
              </option>
              <option value="Viktor Daňko">
                <div class="custom-option">
                  <img
                    width="32"
                    height="32"
                    src="${baseUrl}images/speakers/viktor-danko.webp"
                    alt=""
                    loading="lazy"
                  />
                  <span>Viktor Daňko</span>
                </div>
              </option>
              <option value="Kryštof Klaban">
                <div class="custom-option">
                  <img
                    width="32"
                    height="32"
                    src="${baseUrl}images/speakers/krystof-klaban.webp"
                    alt=""
                    loading="lazy"
                  />
                  <span>Kryštof Klaban</span>
                </div>
              </option>
              <option value="Srigi">
                <div class="custom-option">
                  <img
                    width="32"
                    height="32"
                    src="${baseUrl}images/speakers/srigi.webp"
                    alt=""
                    loading="lazy"
                  />
                  <span>Srigi</span>
                </div>
              </option>
              <option value="Lukáš Chylík">
                <div class="custom-option">
                  <img
                    width="32"
                    height="32"
                    src="${baseUrl}images/speakers/lukas-chylik.webp"
                    alt=""
                    loading="lazy"
                  />
                  <span>Lukáš Chylík</span>
                </div>
              </option>
            </div>
          </select>
          <p id="picker-description" class="block w-full text-slate-600 text-sm mb-0 mt-2">
            Use up and down arrows to browse options, Enter to select
          </p>`}
          />
        </div>
      </form>
    </section>
  </div>
</Layout>

<script is:inline>
  document.addEventListener("DOMContentLoaded", function () {
    const label = document.querySelector('label[for="customSelect"]');
    const select = document.getElementById("customSelect");
    const button = select?.querySelector("button");

    if (label && select && button) {
      label.addEventListener("click", function (e) {
        e.preventDefault();
        select.focus();
        button.click();
      });
    }
  });
</script>
